먼저 S3 버킷을 생성하고 S3에 HTML 파일을 업로드 및 권한 등 설정을 완료한다.     
<img src="https://user-images.githubusercontent.com/33191974/155876160-27711452-30f2-470b-a287-5b0a37dbabdd.png" width="50%" height="50%"/>   
퍼블릭 액세스 차단 설정의 경우 버킷에 저장한 파일의 권한을 설정하는 기능이다. 퍼블릭으로  
데이터를 제공해야되는 경우가 아니라면 서비스 환경의 맞춰 "모든 퍼블릭 액세스   
차단"을 선택해주는 것이 좋다. 추가적으로 버킷 생성 후에도 이 설정값은 변경 가능하다.     
퍼블릭 액세스를 설정안하게 되면, 버킷이 생성된 후 고유한 URL이 부여된다. 이 URL을  
통해서 저장된 파일에 접근할 수 있게 하는 기능을 사용할 수 있다.   
ACL은 액세스 제어 목록으로 버킷과 객체에 대한 액세스를 관리한다.   
<img src="https://user-images.githubusercontent.com/33191974/155876419-1ec598ff-e02a-4788-8b7c-e1d9a6651f52.png" width="50%" height="50%"/>   
그 다음에는 버전관리, 태그, 기본 암호화등을 선택할 수 있다.  
버전관리는 개발할 때 소스를 git, svn으로 관리하는 것처럼 버킷 내의 파일들의  
버전을 관리할 수 있는 기능이다.  
태그는 해당 버킷을 태깅해놓고 이후에 비용측정이라던지 많은 버킷 중에 태그로  
검색을 한다던지 할 때 쓰는 태깅 기능이다. 버킷을 그룹핑하기 좋다.   
암호화는 말그대로 파일들을 암호화해서 좀 더 보안적으로 신경써서 관리하게 해주는  
기능이다.    
  
이 부부은 버킷 생성 후에도 변경 가능하므로 기본값을 그대로 두고 "버킷 만들기"를  
선택한다.  
추가적으로 아래 '고급 설정'을 누르면 객체 잠금을 설정할 수 있다.  
객체 잠금은 중요한 파일이 버킷에 저장될 경우 보안에 좀더 신경써야하므로 이때  
사용하는 기능이다.   

# S3에 파일 업로드
버킷 만들기가 잘 되었으면, 버킷 리스트에 새로 생긴 버킷 리스트가 뜰 것이다.   
버킷 이름을 클릭하여 뜬 화면에서 객체를 업로드하고 관리할 수 있으며, 속성,   
권한, 관리등을 통해 S3 버킷 설정을 변경하고 관리할 수 있다.  
S3에 업로드되는 모든 파일에는 객체 URL이 부여된다.   
하지만 만약 파일 권한을 퍼블릭하게 주지 않으면 AccessDenied라는 에러가 뜬다.   

# 권한 변경 등 설정 변경
파일의 권한을 퍼블릭하게 설정하기 위해서는 버킷의 권한을 퍼블릭으로 수정  
해주어야 한다. 권한 탭으로 들어가 "편집" 버튼을 눌러 모든 퍼블릭 액세스 차단   
체크박스의 체크를 풀어준다.     
그리고 이번에는 업로드한 파일의 퍼블릭 권한을 부여할 것이다.  
객체의 권한 탭을 클릭하고 "편집" 버튼을 누르면 아래와 같이 뜨는 것을 볼 수   
있다. "모든 사람"에 객체 읽기, 객체 ACL 읽기 체크박스를 선택해준다(수정이  
안된다면 버킷의 객체 소유권 ACL 정책을 활성화하면 된다(그러면 수정이  
가능해짐). 버킷에 객체    
소유권 ACL 정책이 활성화되어 있으면 객체 업로드시 객체는 업로드하는 계정의  
소유가 되어 다른 계정에서 접근이 불가능하다. 다른 계정에서 접근하기   
위해서는 객체 업로드시 ACL을 적용하거나 버킷에 객체 소유권 ACL 정책을 비활성  
화하면 된다).       
그러면 이제 부여받은 S3 URL에 들어가보면 업로드했던 파일 사진이 잘보이게 된다. 

그리고 CloudFront 서비스에 접속한다. 참고로, CloudFront는 리전을 선택하지   
않아도 된다. 그 이유는 위에서 살펴보았던 CloudFront의 특징을 살펴보면 알   
것이다.  
  
배포 탭에 들어가서 배포 생성 버튼을 누르면 아래와 같은 화면이 뜬다.    
원본 도메인 칸을 선택하면 현재 사용할 수 있는 S3 버킷, ELB 등의 목록이  
표시된다. 우리가 사용할 S3 버킷을 클릭하자.   
원본 경로는 AWS 리소스나 사용자 지정 Origin에 있는 디렉터리에서 콘텐츠를   
요청하게 하려면 슬래시(/) 뒤에 디렉터리 경로를 입력한다. 예를 들어  
`/production`을 작성했다면 `{OriginDomainName}/sample.jpg를 요청했을 때,   
`{OriginDomainName}/production/sample.jpg`에 대한 요청이 된다.   
이름은 해당 배포 내의 Origin 또는 Origin Group을 고유하게 구별하는 문자열이며,  
원본 도메인을 선택하면 자동으로 입력된다.   
  
나머지 설정은 필요할 때마다 찾아서 설정하고, 일단 나머지는 기본값을 그대로   
두고 생성한다.   
<img src="https://user-images.githubusercontent.com/33191974/155885109-504b8847-421f-4307-a692-de2abe8bfe02.png" width="50%" height="50%"/>     
잘 생성이 된 것을 확인할 수 있다.  
ID는 자동으로 부여되는 값이며, 나중에 배포 시 사용된다.   
Domain name(도메인 이름)은 URL이고, 브라우저에서 호출할 수 있다.   
Origin(원본)은 이전에 생성한 S3의 URL이다.   
Status은 현재 상태를 나타내며 생성하자마자 보면 In Progress라고 뜰 것이다.  
In Progress 상태라는 것은 Edge Location에 배포중이라는 뜻으로, 배포가 완료되면  
Deployed(활성화됨) 상태가 된다.   
<img src="https://user-images.githubusercontent.com/33191974/155885242-e2ecdcce-f1ba-47fc-be62-c97c5c1bff2b.png" width="50%" height="50%"/>    
이제 도메인 이름의 URL을 브라우저에서 호출해보면 아직은 Access Denied가   
뜰 것이다. 다시 설정한 옵션을 하나만 수정해주자.     
<img src="https://user-images.githubusercontent.com/33191974/155885426-c6f5ddb0-1e00-41a1-a6c6-b713d0b18a24.png" width="50%" height="50%"/>    
Default Root Object(기본값 루트 객체)를 설정하지 않았기 때문에 에러가 난  
것이다. Default Root Object는 CloudFront 배포 도메인의 최상위(루트 URL)로   
요청할 때, CloudFront에서 Origin으로부터 요청할 객체를 작성하는 부분이다.   
기본값 루트 객체를 지정하는 경우 아래와 같이 객체 이름만 입력하면 된다.  
<img src="https://user-images.githubusercontent.com/33191974/155885578-f09f2ad3-a821-4359-84a7-7dc6a1a9763d.png" width="50%" height="50%"/>     
설정 완료 후 도메인 이름을 복사하여 웹 페이지에서 호출해보자.  
이제 설정한 index.html 파일이 잘 보인다.   
<img src="https://user-images.githubusercontent.com/33191974/155885705-83871e74-543d-4ef1-82e5-3ec77fcabd4e.png" width="50%" height="50%"/>  

> #### 크롬에서 HTTP 헤더 확인하기  
> 크롬 웹 브라우저 개발자 도구에서는 HTTP 헤더를 확인할 수 있다.  
> 개발자 도구에서 Network 부분을 보면 현재 웹사이트에서 열린 파일들의 목록이   
> 표시되고, 파일을 클릭하면 HTTP 헤더를 확인할 수 있다. Response Headers에  
> X-Cache 항목을 보면 Hit-from cloudfront라고 표시된다. 이것은 CloudFront에  
> 캐시된 파일을 가져왔다는 뜻이다.    
> 캐시 유지 시간이 지나서 CloudFront가 오리진에 접속하여 파일을 가져왔을 때는   
> Miss from cloudfront라고 표시된다.   

> #### CloudFront 배포 삭제하기   
> CloudFront 배포를 삭제하려면 배포 목록에서 배포를 선택한 뒤 Disable 버튼을   
> 클릭하여 동작을 정지시킨다. 모든 에지 로케이션에 전파되기까지 15 ~ 20분 정도   
> 걸린다. Status가 Deployed로 바뀌었다면 Delete 버튼을 클릭하여 배포를 삭제한다.  















































