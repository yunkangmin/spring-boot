<img src="https://user-images.githubusercontent.com/33191974/155841469-47ea0f4f-9dc2-4618-b3e0-aec933be4e8f.png" width="50%" height="50%"/>  
S3를 매뉴얼하게 콘솔에서 업로드하는 일은 생각보다 많지 않다. 대부분 API 혹은   
SFTP를 이용하게 된다. 최근 콘솔에서 업로드할 일이 생겼는데 역시 화면이 또  
바뀌었다. 특히 처음 S3를 사용하면 너무나 많은 옵션과 설정에 당황하게 된다.  
스탠다드는 뭐고 단일 영역은 뭐고 뭐가 다른거지? 이렇게까지 복잡하게 만들어야   
하나?라는 생각을 하게 한다.  
객체에서 작업을 클릭하면 보인다.  
<img src="https://user-images.githubusercontent.com/33191974/155841625-cad90d7c-fcfb-44cc-896a-bb3437c25b9c.png " width="50%" height="50%"/>     
하지만 알고보면 생각보다 훨씬 합리적인 요금제이다. 사용자가 정말 쓴만큼만 과금할 수   
있도록 하는 요금제이다. S3는 크게 3가지 요금제와 Glacier로 나뉠 수 있다.  
이제 하나하나 알아보자.   

> 비용에 대한 부분은 설정 환경에 따라 아래 명시된 금액과 큰 차이를 보일 수 있다.   
> 아래의 표기되는 금액들은 아주 일반적인 상황에서 단순 비교를 하였을 때를 기준으로  
> 한다.   

# S3 스탠다드
처음할 때 모르겠다면 S3 스탠다드로 하는게 좋다. 가장 일반적인 요금제이다.   
가장 큰 특징은 비싼 스토리지 요금과 저렴한 트래픽 요금이다.  
<img src="https://user-images.githubusercontent.com/33191974/155841757-95d7bd2d-61a2-450b-a75b-88df086e83c3.png" width="50%" height="50%"/>      
서울리전 기준으로 첫 50테라까지 0.25USD이다.  
<img src="https://user-images.githubusercontent.com/33191974/155841783-194b926d-9e90-4c61-a3c6-dd9f7c1d9c4f.png" width="50%" height="50%"/>   
트래픽 요금은 반환데이터 기가당 0.0008$ 스캔데이터 기가당 0.00225$이다.   
S3만 보아서 와 닿지 않으니 다른 요금제와 함께 비교해보자.  

# S3 스탠다드 IA(Infrequent Access(드문 액세스))    
사용도가 다소 낮은 경우의 요금제이다. 신문기사를 예로 들자면 오늘기사는 트래픽이  
많겠지만 1달 2달이 지나면 트래픽이 많이 줄어들 것이다. 그렇다고 계속 하향추세로  
간다고 단정짓기도 애매한 것이 나중에 다시금 기사가 이슈화되어 또 다시 많은  
트래픽이 몰릴 수 있어 언제든 많은 트래픽이 올 것을 준비하고 있어야 한다.   
이럴 때 Inrequent Access를 사용하기 적합하다.   
  
일반적으로 30일이상 액세스가 잘 이루어지지 않았다면 IA 요금제로 전환하며   
요금제의 경우  
<img src="https://user-images.githubusercontent.com/33191974/155842006-42be31ea-17b5-4c8f-b44e-136b1bb3ce94.png" width="50%" height="50%"/>  
S3보다는 저렴한 보관요금 하지만 트래픽 요금은 더 비싸다.   

# S3 단일영역 IA(One Zone-Infrequent Access)  
이름부터 뭔가 어려울 것같다는 느낌이 난다. 하지만 생각보다는 싱거운 놈이다.   
우리가 파일들을 저장할 때 일반적으로 백업을 한다. 혹시 모를 상황에 대비해서이다.   
S3를 사용하면 사용자가 몰라도 자동적으로 3곳 이상의 물리적 가용영역에 백업이 된다.   
1곳에서 지진해일 혹은 정전등 문제가 발생해도 내 데이터는 문제가 없다.   
   
하지만 이렇게 굳이 백업까지해야하는 데이터가 있다. 예를 들면 매일 발생하는   
사용자별 분석로그나 트래픽 로그등이 있다. 상당히 많이 발생하여 비용적 부담은   
큰데 당장 몇몇 부분이 없어지더라도 서비스 전체에는 큰 영향을 주지 않는   
로그데이터들이 적합하다.  
<img src="https://user-images.githubusercontent.com/33191974/155842185-34dd5926-534b-4313-b5f6-925b020929c7.png" width="50%" height="50%"/>    
단일영역IA는 스탠다드 IA와 트래픽 요금은 같지만 저장요금은 더 저렴하다.   
하지만 역시 문제는 가용영역에 문제가 생길 경우 데이터를 날려먹을 수 있으며 아래와  
같이 친절하게 홈페이지에서도 다시 한 번 강조해준다.   
  
> **S3 One Zone-IA는 단일 AWS 가용 영역에 데이터를 저장하기 때문에 이 스토리지  
> 클래스에 저장된 데이터는 가용성 영역이 파괴되는 경우 손실된다.**  

# Glacier 글래시어  
Glacier는 S3와 S3 IA보다도 더 저렴한 스토리지 요금을 갖지만 S3보다 훨씬 비싼   
트래픽 요금을 갖는다. 게시판에서 1년 이전의 첨부파일등을 저장하기 적합하다.   
기억하기로 S3와 Glacier의 출시 이후 S3 IA, S3 OZIA가 추가되었던 걸로 기억한다.  
<img src="https://user-images.githubusercontent.com/33191974/155842325-478c1d3f-130e-4056-86dd-f4475d7825aa.png" width="50%" height="50%"/>  
단순비교시 저장요금이 스탠다드 대비 5분에 1로 떨어지는 걸 볼 수 있다.   
<img src="https://user-images.githubusercontent.com/33191974/155842354-1b9a7de9-ecd2-4791-9a60-e3a96220170b.png" width="50%" height="50%"/>  
하지만 트래픽 요금은 역시 5배이상 증가하게 된다.  

# 마치며
개인적으로 S3 서비스중 가장 마음에 들지 않는 서비스 중 하나이다. 역시 이유는  
비용문제이다. 모바일 서비스를 할 땐 큰 문제가 없지만 웹 서비스를 할 땐 문제가   
많다. 아무리 이미지를 최적화 하여도 국내의 다른 이미지 호스팅 서비스를 사용하는   
것에 비해 비용이 10배 20배씩 나와 손떨리는 청구서를 받곤 했다.    
그래도 물론 Google Cloud Storage보단 월등히 싸다).  
  
기존의 S3가 Cloud Front라는 CDN 서비스와 함께 넓은 지역 혹은 다국가 서비스등  
큰 스케일을 하기에 아주 훌륭한 플랫폼이라고 생각한다. 미국만 하여도 동서부간  
물리적 거리가 상당하다. 때문에 동부에서 업로드된 이미지가 서부에서도 딜레이없이  
호스팅되고 또한 북미/유럽 간 파일의 전송과 업로드가 마치 하나의 지역처럼 큰  
레이턴시없이 업로드되고 다운로드될 수 있도록 지원한다. 이 과정에서도 높은 가용성을   
자랑하고 대륙별로 뻗어 있는 CDN 센터를 통해 출시가 되었을 때 전세계를 대상으로한   
빠른 배포가 가능하다.   
  
이런 기능들을 생각하면 분명 비싼 서비스라고 하기보다 오히려 저렴한 서비스이다.   
문제는 서비스가 주로 국내중심으로 되어있고 트래픽이 많이 발생하며 이런 큰    
스케일의 기능등을 사용하지 않는다면 다소 요금이 비싸게 다가올 수 있다. 필자또한  
기존의 국내 이미지 호스팅을 사용하다 S3를 옮기고 비용이 10배에서 15배정도 더   
발생하여 인보이스를 볼 때마다 놀래 다시 국내 이미지 호스팅을 이용했던 적이 있다.   
  
이렇듯 모든 걸 다 한 곳에서 하기보다 크로스 클라우드 혹은 여러가지 비용을 최적화  
할 수 있는 방법을 고려하며 선택하는 것이 가장 합리적인 것 같다.     



  









































