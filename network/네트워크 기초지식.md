## 네트워크에 대한 전반적인 기초 지식 정리
![image](https://user-images.githubusercontent.com/33191974/135745995-1c28babe-f6c8-4ee0-b444-32547c34051f.png)

#### 네트워크(네트워크 기술)
네트워크 기술이란 서버와 클라이언트의 정보가 오고 가는 다리 역할을 하는 기술의 총칭을  
의미한다.  
네트워크라는 말은 연결되어 있다라는 뜻으로 네트워크는 데이터를 케이블에 실어 나르는 것을  
의미한다. 
(무선 LAN은 전파로 데이터를 실어 나른다.)

#### LAN(Local Area NetWork)
LAN이란 기업이나 조직 등 비교적 좁은 범위 안에 존재하는 컴퓨터 네트워크를 의미한다.  
LAN은 LAN 케이블을 이용하여 데이터를 전송하는 유선 LAN과 전파를 이용하여 데이터를  
전송하는 무선 LAN으로 구분한다.  

- LAN 케이블이란  
  LAN 케이블은 LAN을 연결하기 위한 케이블
  
- LAN 스위치란  
  LAN 스위치는 LAN을 구성하기 위한 네트워크 기기
  
#### 네트워크 작동 원리
네트워크는 OSI 참조 모델을 바탕으로 작동한다.  
OSI 참조 모델은 국제표준화기구(ISO)가 컴퓨터 통신 기능을 계층 구조로 나눠서  
정리한 모델로 일종의 통신 규칙 모음이라 생각하면 된다.  
보통 OSI 7계층이라고 하는데 하위 계층(물리 계층)부터 상위 계층(전송 계층)으로  
구성된다.  

- OSI 7계층
   - 제 1계층(물리계층)  
     네트워크 케이블의 재질이나 커넥터의 형식, 핀의 나열 방법 등 물리적인 요소를  
     모두 규정한다. 
   - 제 2계층(데이터 링크 계층)  
     직접 연결된 기기 사이에 논리적인 전송로(데이터 링크)를 확립하는 방법을 규정한다.  
   - 제 3계층(네트워크 계층)  
     동일 또는 다른 네트워크의 기기와 연결하기 위한 주소와 경로의 선택 방법을 규정한다.  
   - 제 4계층(전송계층)  
     데이터를 통신할 상대에게 확실하게 전달하는 방법을 규정한다.  
   - 제 5계층(세션계층)  
     데이터를 흘려보내는 논리적인 통신로(커넥션)의 확립과 연결 끊기에 대해 규정한다.  
   - 제 6계층(표현계층)  
     애플리케이션 데이터를 통신에 적합한 형태로 변환하는 방법을 규정한다.  
   - 제 7계층(응용계층)  
     애플리케이션 별로 서비스를 제공하는 방법을 규정한다.  
     
#### OSI 참조 모델
참조 모델이라는 단어에 주목해보면,  
이 모델이 컴퓨팅 장치나 네트워크 장치를 설계할 때 이 모델을 참조해서  
만들라고 만들어진 모델이구나 생각할 수 있다.  
  
그렇다면 왜 컴퓨팅 장치나 네트워크 장치를 설계할 때 참조할 모델이 필요한 걸까?  
실제로 우리 주변에서 만들어진 대부분의 물건들은 어떤 모델을 참조해서 만들어지기  
때문이다.  
그런데 옛날에는 컴퓨팅 장치나 네트워크 장치를 설계할 때 참조할 표준 모델이 없었기 때문에  
이 기업 저 기업에서 중구난방으로 각자의 모델에 맞춰 장치를 개발했다고 한다.  
그 결과 서로 다른 회사에서 만든 장치끼리는 통신이 되지 않는 불상사가 발생했었다고 한다.  
이 사고를 방지하기 위해서 국제 표준화 기구(ISO)에서 통신 장비를 설계할 때 기준으로 삼으라고  
제시해 준 표준 모델이 바로 OSI 참조 모델이다.  
  
OSI 참조 모델은 컴퓨터 통신 구조의 표준적 모델이 되도록 설계되었다.  
또한 앞으로 개발될 모든 네트워크 프로토콜(통신할 때 일종의 약속이 되는 양식, 규칙을 의미한다고  
생각하면 된다.)  
디자인의 표준적인 뼈대가 될 수 있도록 만들어져 현재 이 세상에 존재하는  모든 프로토콜 디자인은  
이에 맞추어 설계되어 있고, 앞으로 개발될 프로토콜 디자인 또한 그러할 것이다.  
이렇게 설계할 때 7가지 계층을 만들어서 설계했는데  
이 때문에 OSI 7계층 모델이라고 부르는 사람도 많다.  
  
OSI 참조 모델이 만들어짐으로써 이 모델을 완벽히 이해하고 있을 경우 네트워크 통신이  
어떻게 진행되는지 그 흐름을 파악하기 쉬워졌다.  
네트워크 통신 과정을 단계별로 파악할 수 있기 때문이다.  
또한 통신 내에서 트래픽이 어떻게 흘러가는지, 어떤 프로토콜에 대해 그 구성이 어떻게  
되어 있는지 대강 짐작할 수도 있게 된다.  

#### OSI 참조 모델의 특징
지금부터는 이 OSI 참조 모델이 어떻게 생겨먹은 건지  
또 어떤 특징을 가지고 있는지 설명하도록 하겠다.  
  
방금 전 OSI 참조 모델이 설계될 때 7가지 계층 구조로 설계되었다고 언급했었다.  
백문이불여일견이라고 바로 계층 구조를 살펴보도록 하자.  
![image](https://user-images.githubusercontent.com/33191974/135746851-3374c3ea-088d-4837-b8dc-8192f1a4a0fd.png)  
계층별 기능에 대해서는 아래에서 자세히 설명하도록 하고  
일단 여기서는 그림을 보면서 낮은 1계층부터 가장 높은 7계층까지 어떤 구조를 가지고 있는지만  
이해하고 넘어가도록 하자.  
이 그림에서 OSI 참조 모델의 첫 번째 특징이 나온다.  
OSI 참조 모델의 7가지 계층은 계층 간 상하구조를 가진다는 것이다.  
  
계층 간 상하 구조를 가진다는 것은 모든 하위 계층이 정상적으로 작동해야 상위 계층이 정상적으로  
작동할 수 있는 구조라는 것이다.  
예를 들면, 물리 계층 연결이 제대로 되어 있지 않으면 다른 모든 계층이 정상적으로 작동될 수 없다.  
이런 방식으로 설계한 이유가 뭐냐면, 이렇게 설계했을 때 유지보수가 쉬워지는 장점이 있기 때문이다.  
네트워크 통신 과정에서 오류가 발생했을 때, 하위 계층의 프로토콜부터 순서대로 문제가 발생했는지  
확인하면서 나아가면 어떤 계층에서 오류가 발생했는지 쉽게 파악할 수 있다. 
  
또한 OSI 참조 모델의 계층 구조에는 중요한 특징이 하나 더 있다.  
바로 각 계층은 독립성을 띠고 있다는 것이다.  
위의 예시에서 오류가 발생한 계층을 파악했을 때, 해당 계층만 수정하면 다시  
네트워크 통신을 정상화할 수 있다는 것이다. 
이 덕분에 어떤 계층에서 오류가 발생해도 다른 계층의 장비에는 직접적인 피해를 주지  
않게 된다.  
  
그렇다면 각 계층 간의 독립성을 보장하면서도 상하 계층 간 통신을 진행해야 할텐데  
어떤 방식으로 진행될까?  

#### Encapsulation & Decapsulation
사용자가 어떤 데이터를 응용 계층(최상위 계층)에서 생성하고 이를 다른 곳으로 전송하는  
과정을 상상해보자.  
이 데이터는 하위 계층으로 한 계층씩 내려가게 되는데 이 각각의 층마다 하위 계층으로 데이터를  
전송할 때 다른 계층에서 처리한 데이터를 인식할 수 있도록 하기 위해 각 계층에선 데이터에 헤더를  
붙이게 된다.  
이 과정을 캡슐화(Encapsulation)라고 한다.  
즉, 최상위 계층에서 만들어진 데이터는 전송되기 전 물리계층(1계층)에 도착했을 때 최소 6개의  
헤더가 달린 상태가 된다는 것이다.  
각 계층마다 캡슐화가 진행되기 때문이다.  
(2계층에서는 헤더 뿐만 아니라 테일까지 붙인다.)  
  
이 데이터는 물리 계층에서 0과 1로 이루어진 신호(Signal)로 변환되어 전송 매체(케이블 등)를  
통해 다른 곳으로 전송된다.  
이 신호를 받은 곳에서는 이 신호를 다시 원래 데이터의 모습으로 사용하기 위해 물리 계층부터  
응용 계층까지 데이터를 올리게 되는데 이 때 한 계층을 지날 때마다 방금 붙었던 헤더(와 테일)에 
담긴 정보를 확인하고 난 뒤 떼내면서 데이터를 읽게 된다.  
이 과정을 역캡슐화(Decapsulation)라고 한다.  
![image](https://user-images.githubusercontent.com/33191974/135748075-2d02ff3a-5674-43e1-9f66-956831fbcf4f.png)  
캡슐화 과정을 나타내 그림. 데이터는 게층을 지나면서 헤더가 하나씩 붙게 된다.  
  
이로써 OSI 참조 모델에 대한 기본 개념에 대해 모두 익혔다.  
다음으로는 OSI 참조 모델의 각 계층이 어떤 일을 하고, 계층마다 어떤 프로토콜이  
있는지 알아보도록 하자.  

#### OSI 참조모델의 각 계층에 대한 설명
지금부터 각 계층이 하는 일, 각 계층의 대표적인 프로토콜, 각 계층에서의 데이터  
전송 단위에 대해 설명할 것이다.  
프로토콜은 이 글 첫 문단에서 언급한 대로 네트워크 통신할 때 사용되는 일종의 규약이다.  
이 규약들은 여러 계층에서 다른 규약과 상관없이 독립적으로 작동한다.  
우리가 알고 있는 HTTP, HTTPS, IP 등의 "P"가 Protocol의 약자다.  
이 것들도 프로토콜의 일종이기 때문이다.  

1. 물리계층(Physical Layer)
   - 하는 일  
     물리적 매체를 통해 0과 1의 비트 흐름을 전송하기 위해 요구되는 기능들을 조정한다.  
   - 장비  
     케이블, 리피터, 허브  
케이블과 같은 연결 장치를 사용하여 다른 장치와의 물리적인 연결을 수행하고, 이 연결을  
바탕으로 전기 신호를 직접 전송하는 계층이다.  
이 계층에서 0과 1의 전압 및 케이블 사양 핀의 개수 등이 정의되어 있다.  
이 계층은 별다른 알고리즘이나 오류 제어 기능은 없고 단순히 데이터 전달의 역할만을  
수행하도록 설계되었다. 

2. 데이터 링크 계층(Data Link Layer)
   - 하는 일  
     데이터 통신 과정에서 오류가 없도록 노드 대 노드 간의 정보 전송의 신뢰성을 보장한다.  
   - 주요 프로토콜  
     CSMA/CD, LLC, Token Ring 등
   - 데이터 전송단위  
     프레임(Frame)
   - 장비  
     브릿지, 스위치  
데이터 링크 계층은 정보의 오류와 흐름을 관리하여 안정된 정보를 전달한다.  
네트워크 계층(3계층)에서 전달받은 데이터에 그 정보의 주소와 제어 정보를 각각 헤더와  
테일로 붙인다.  
데이터 링크 계층에서 이렇게 전송하는 데이터의 전송 단위를 프레임이라고 한다.  
  
데이터 링크 계층의 대표적인 장비인 스위치는, 각 장치마다 MAC 주소를 두어 정확한 장치로  
데이터를 전송할 수 있도록 한다.  

3. 네트워크 계층(Network Layer)
   - 하는 일  
     다중 네트워크 링크에서 패킷을 발신지로부터 목적지까지 성공적으로 효과적으로 전달한다.  
   - 주요 프로토콜  
     IP, ICMP, IGMP, ARP등
   - 데이터 전송 단위  
     패킷(Packet)
   - 장비  
     라우터
데이터 링크 계층에서 노드 대 노드 데이터 전달을 감독했다면  
네트워크 계층은 데이터가 최종 목적지까지 어떤 경로를 통해 전달될 지 경로를  
설정하는 역할을 한다.  
네트워크 계층의 데이터 전송 단위를 패킷이라고 한다. 
패킷을 최종 목적지까지 가장 빠르고 안전하게 전송할 수 있도록 하는 것이 네트워크  
계층에서 하는 일이다.  
이 과정을 라우팅이라고 하며, 라우터를 사용해서 이 기능을 수행한다. 

4. 전송 계층(Transport Layer)
   - 하는 일  
     종단 간 정보 전송의 신뢰성을 보장하고, 오류를 복구하며, 흐름을 제어한다.
   - 주요 프로토콜  
     TCP, UDP등
   - 데이터 전송 단위  
     세그먼트(Segment), 데이터그램(Datagram, UDP에서)
   - 장비  
     게이트웨이
전송 계층에서는 발신지와 목적지, 양 종단 간 정보 전송의 신뢰성을 보장하고  
오류를 복구하며 흐름을 제어한다.  
여기서 신뢰성을 보장한다는 말은 데이터가 정상적으로 전송됬는지 확인하고 정상적으로  
전송되지 못한 데이터가 있다면 이를 재전송하여 누락되는 데이터가 없도록 보장한다는 의미이다.  
또한 데이터 통신 과정에서 오류가 발생했을 경우 이를 해결하고 각 데이터 전송의 흐름을 제어하는  
역할을 하게 된다.  
  
아래 5계층부터는 데이터 전송 단위를 전부 메시지/데이터라고 부르고  
소프트웨어를 통해서 구현되기 때문에 별도의 하드웨어 장비가 없다.  
따라서 데이터 전송 단위와 장비에 대한 설명은 생략하도록 하겠다.  

5. 세션 계층(Session Layer)
   - 하는일  
     응용 프로세스를 통해 통신 세션을 구성한다.
   - 주요 프로토콜  
     TLS, SSH
응용 프로세스를 통해 통신 세션을 구현한다는 말이 바로 이해가 가지 않는다면  
어플리케이션을 통해 포트 연결을 진행한다고 바꿔 읽어 보자.  
(사실 포트는 전송계층과 세션 계층 사이에 있는 모호한 위치에 있지만  
이해하기 편하도록 포트 연결이라고 설명하도록 하겠다.)  
세션 계층은 이 포트 연결을 통해 통신 장치 간의 상호작용을 설정하고  
유지하며, 동기화하는 역할을 한다.  

6. 표현 계층(Presentation Layer)
   - 하는일  
     운영체제를 통해 입출력되는 데이터를 다른 표현 형태로 변환한다. 
   - 주요 프로토콜  
     JPEG, MPEG, ASCII
표현 계층에서는 데이터를 다른 장치 모두가 이해할 수 있도록 번역을 한다.  
다른 장치에서도 내가 보낸 데이터가 내가 보낸대로 일관되게 출력되도록 하기 위한  
계층이다.  
주요 프로토콜의 JPEG, MPEG를 보면 쉽게 이해할 수 있는데 
내 휴대폰을 통해 보낸 JPG 확장자의 사진이 다른 장치에서도 똑같이 보이는 이유가  
다른 장치의 표현 계층에서 통신 과정에서 얻은 데이터의 번역을 수행했기 때문이라고  
생각하면 이해하기 편하다.

7. 응용 계층(Application Layer)
   - 하는일  
     사용자와 직접 상호작용하며 인터페이스 역할을 수행한다.  
     각 프로세스 간의 정보 교환을 담당한다. 
   - 주요 프로토콜  
     DHCP, DNS, FTP, HTTP
응용 계층은 우리들이 사용하는 대부분의 프로그램들이 있는 계층이다.  
동영상 재생 프로그램이나 인터넷 브라우저등 우리가 자주 사용하는 프로그램들  
또한 이 계층에 포함되어 사용자가 네트워크에 접근할 수 있도록 도와주는 기능을 수행한다.

#### 프로토콜
프로토콜이란 네트워크 통신을 위한 통신규칙을 의미한다.  
프로토콜의 역할은 데이터의 캡슐화와 캡슐 해제화를 하는 것이다.  
네트워크 통신에서 OSI 참조 모델의 계층을 넘어설 때마다 데이터를 캡슐에  
넣거나 꺼낸다.
![image](https://user-images.githubusercontent.com/33191974/135749339-170bc037-b278-47dc-b36f-c72ad168bc5c.png)  

#### 이더넷
이더넷은 OSI 제 1계층과 제 2계층의 기술 규격이다.  
유선 네트워크의 경우 거의 대부분이 이더넷을 사용한다.  
이더넷은 네트워크 계층으로부터 받은 데이터(패킷)에 프레임의 처음을 나타내는 프리앰블(preamble)  
과 목적지(수신자)와 출발지(송신자)를 나타내는 헤더, 비트 오류체크에 사용하는 FCS(Frame Check  
Sequence)를 추가하여 프레임을 생성한다.  
이더넷은 MAC 주소라는 48비트로 된 식별자를 사용하여 컴퓨터를 식별한다. 
![image](https://user-images.githubusercontent.com/33191974/135749448-423f2e72-003e-4de7-9744-fdbc30558d15.png)

#### MAC 주소
MAC 주소란 데이터 링크 계층(제 2계층)에서 통신을 위해 사용되는 48비트로 된 식별자이다.  
MAC 주소는 8비트마다 하이픈(-)이나 콜론(:)으로 구분하여 16진수로 표기한다.  
상위 24비트는 전기 및 전자관계 기술자 단체인 미국전기전자학회(IEEE)가 기기의 제조업체  
별로 할당한 제조업체코드(OUI, Organizationally Unique Identifier)라고 하는데  
해당 코드로 제조업체를 알 수 있다. 
하위 24비트는 제조업체가 기기 별로 고유한 값을 할당한 코드이다.  
NIC에 할당되어 있는 MAC 주소는 전 세계에 하나밖에 없는 고유한 값이다.  
예를 들어 내 컴퓨터의 MAC 주소는 98:24:01:6E:09:5B또는 98-24-01-6E-09-5B로  
표현될 수 있다.   
여기서 앞부분 98-24-01 상위 24비트는 제조업체코드이고 뒷부분 6E-09-5B 하위 24비트는  
제조 업체 내부 코드이다.  

- NIC(Network Interface Controller)란
  NIC은 컴퓨터를 네트워크에 연결하여 통신하기 위해 사용하는 하드웨어 장치이다.  
  흔히 우리가 네트워크 카드, 랜 카드로 부르는 것이 NIC이다. 
  
#### 스위칭
네트워크 스위치가 데이터 패킷 내 포함된 주소 정보에 따라 해당 입력 패킷을 해당 출력 포트에  
빠르게 접속 시키는 기능을 스위칭이라고 한다.  
쉽게 설명하자면 네트워크 스위치가 수행하는 프레임 전송을 스위칭이라고 한다.  

- 네트워크 스위치란  
  네트워크 스위치는 L2(제 2계층, 데이터 링크 계층)에서 사용하는 네트워크 기기로  
  LAN 케이블을 통해 컴퓨터를 연결한다.  
  (레이어는 계층을 의미하고 해당 계층의 장비는 해당 계층에서 사용하는 프로토콜을  
  주고 받는다고 이해하면 쉽다.)
  네트워크 스위치는 프레임이 들어온 LAN 포트 번호와 그 프레임의 출발지 MAC 주소를  
  테이블로 만들어 일정 기간 동안 기억하며 불필요한 프레임 전송을 막고 이더넷 네트워크  
  통신의 효율을 향상시키는 역할을 한다.  
  이 때 LAN 포트 번호와 출발지 MAC 주소의 테이블을 MAC 주소 테이블이라고 한다. 
  ![image](https://user-images.githubusercontent.com/33191974/135753189-6986834b-c80b-46e1-9c7d-5ff4c67c56e8.png)
  
#### IP(Internet Protocol)
IP는 전송계층(제 4계층)으로부터 받은 데이터(세그먼트)에 IP 헤더를 붙여 패킷으로 만드는  
역할을 한다.  
IP 헤더에는 여러 필드 값(버전, 헤더길이, 프로토콜 등), 출발지 IP주소, 도착지 IP 주소가  
들어간다.  
![image](https://user-images.githubusercontent.com/33191974/135753258-d95078cb-0897-4b64-abdd-61295ded03fe.png)  

IP는 IP 주소라는 32비트로 된 식별번호를 사용하여 컴퓨터를 식별한다.  
IP주소는 8비트마다 점(.)으로 구분하고 10진수로 표기한다.  
IP주소는 네트워크 분리 및 구분을 위해 서브넷 마스크라는 32비트로 된 값과 세트로 사용한다.  
또한 IP주소는 서브넷 마스크로 분할된 네트워크부와 호스트부로 구성되어 있다.  
네트워크부는 네트워크 자체를 나타내고, 호스트는 해당 네트워크에 연결되어 있는 단말을 나타낸다.  
서브넷 마스크는 연속된 1의 값이나 연속된 0의 값만 가질 수 있는데 이 때 1의 값을 가지는 부분은  
네트워크 부이고, 0의 값을 가지는 부분이 호스트부이다.  
예를 들어 IP 주소가 192.168.1.1이고 서브넷 마스크가 255.255.0.0 이라고 하자.  
서브넷 마스크를 2진수로 나타내면 11111111.11111111.00000000.00000000이다.  
여기서 서브넷 마스크가 1이 되는 부분이 네트워크부이기 때문에 192.168. 이 네트워크부이고  
1.1 부분은 서브넷 마스크가 0인 부분이기 때문에 호스트 부이다.  
서브넷 마스크의 1의 개수로 IP 주소를 간편하게 나타내면 192.168.1.1/16이 된다.  
만약 서브넷 마스크가 255.255.255.0이라면 네트워크 부는 192.168.1 까지가 되고  
나머지 1이 호스트부가 된다.  

- 서브넷 마스크를 사용하는 이유  
  서브넷 마스크를 사용하는 이유는 IP 주소 자체가 개수가 제한되어 있고  
  네트워크를 효율적으로 분배하기 위해서이다.  
  서브넷 마스크 원리는 서브네팅을 찾아보면 된다. 
  
#### 라우팅
라우팅이란 라우터가 네트워크에서 패킷을 목적지까지 최적의 경로를 선택하는 과정이다.  

- 라우터란  
  라우터는 각 독립된 네트워크들을 연결할 때 L3(제 3계층, 네트워크 계층)에서 사용하는  
  네트워크 기기이다.  
  L3 장비이기 때문에 패킷을 전송한다.  

라우터는 라우팅 테이블을 이용하여 패킷을 전송한다.  
라우팅 테이블은 목적지 네트워크와 목적지 네트워크로 가기 위해 보내야할 곳의  
IP 주소(넥스트 홉, next hop)로 구성되어 있다.  
넥스트 홉이란 패킷이 목적지 네트워크까지 가기 위해 도달하는 다음 라우터를 의미한다.  
패킷이 목적지까지 가는데 거치는 라우터 개수를 홉수(hop count)라고 한다.  
라우터는 패킷을 받으면 패킷의 목적지 IP 주소와 라우팅 테이블의 목적지 네트워크를  
대조하여 해당 IP주소가 있으면 패킷을 전송하고 없으면 패킷을 폐기한다.  
  
라우팅에는 정적 라우팅과 동적 라우팅이 존재한다.  

- 정적 라우팅  
   - 정적 라우팅이란 수동으로 라우팅 테이블을 만드는 방법
   - 목적지 네트워크와 넥스트 홉을 하나하나 설정
   - 정적 라우팅은 네트워크를 구성하는 모든 라우터에 대해 라우팅 설정이 필요
   - 설정을 알기 쉽고 관리하기 쉽기 때문에 소규모 네트워크 환경에서 주로 사용
- 동적 라우팅  
   - 동적 라우팅이란 인접하는 라우터들이 라우팅 정보를 서로 교환하여 라우팅 테이블을  
     자동으로 만드는 방법
   - 라우팅 정보를 교환하기 위한 프로토콜을 라우팅 프로토콜이라고 함
   - 네트워크 환경의 변화대응과 장애 내구성 향상이 가능하기 때문에 중간부터 대규모  
     네트워크 환경에서 주로 사용
     
#### ARP(Address Resolution Protocol)
ARP는 MAC주소와 IP주소를 협조하면서 이용할 수 있도록 물리와 논리의 다리 역할을 한다.  
즉, 물리적인 주소인 MAC 주소와 논리적인 주소인 IP 주소를 대응시키는 역할을 하는 것이다.  
네트워크 통신을 하기 위해서는 제 3계층으로부터 받은 패킷을 프레임으로 만들어 케이블로  
흘려보내야 하는데 이 때 출발지인 MAC주소는 자기 자신의 NIC에 쓰여있는 MAC주소라서 알 수  
있지만 목적지 MAC주소는 알 수가 없다.  
이 때 ARP를 이용하여 IP 주소로부터 MAC주소를 구할 수 있다.  
과정은 ARP request -> ARP reply -> ARP 테이블 등록 순이다.  
동일 네트워크 상에서는 수집된 ARP 테이블을 참고하여 프레임을 만든다.  
다른 네트워크 간 통신은 기본 게이트웨이의 MAC 주소를 ARP 에서 조회하여 목적지 MAC 주소로  
등록한다.  
기본 게이트웨이는 자신 이외의 네트워크로 갈 때 사용하는 출구가 되는 IP 주소이다.  
보통 방화벽이나 라우터의 IP 주소가 기본 게이트웨이가 되는 경우가 많다.  
IP 주소는 목적지까지 바뀌지 않지만 MAC주소는 NIC을 경유할 때마다 바뀐다.  

#### TCP/UDP
- TCP(Transmission Control Protocol)  
  TCP는 전송제어 프로토콜로 IP와 함께 TCP/IP로 불리며 제 4계층(전송계층)에서 사용되는  
  프로토콜이다. 
  TCP는 데이터를 송신할 때마다 확인 응답을 주고 받는 절차가 있어서 통신의 신뢰성을  
  높인다.  
  웹이나, 메일, 파일 공유등과 같이 데이터를 누락시키고 싶지 않은 서비스에 주로 사용된다. 
  
- UDP(User Datagram Protocol)  
  UDP는 TCP와 함께 데이터그램으로 알려진 단문 메시지를 교환하기 위해 사용하는 프로토콜이다.  
  데이터만 보내고 확인 응답과 같은 절차를 생략할 수 있으므로 통신의 신속성을 높이다.  
  주로 DNS, VoIP등에 사용된다.

- TCP와 UDP  
  TCP와 UDP 모두 포튼 번호로 서비스를 식별한다.  
  두 프로토콜을 구분하는 주요한 차이는 통신의 신뢰성이냐 신속성이냐이다.  
  애플리케이션 데이터에 TCP 또는 UDP 헤더를 추가하여 TCP 세그먼트나 UDP 세그먼트가  
  만들어진다.  
  
#### 포트번호
포트번호는 컴퓨터 안에서 작동하는 애플리케이션을 식별하기 위해 사용하는 숫자이다.  
포트번호는 0 ~ 65535(16비트 분)까지 숫자로 범위에 따라 용도가 정해져 있다. 
포트 번호는 세그먼트를 만들 때 헤더에 출발지 포트와 목적지 포트로 들어간다.  
- 0 ~ 1023  
  잘 알려진 포트(well-known port)라고 해서 웹 서버나 메일 서버 등의 일반적인 서버  
  소프트웨어가 서비스 요청을 대기할 때 사용된다. 
- 1024 ~ 49151  
  등록된 포트(registered port)라고 해서 제조업체의 독자적인 서버 소프트웨어가 클라이언트  
  서비스 요청을 대기할 때 사용된다.  
- 49152 ~ 65535  
  동적 포트(dynamic port)로 서버가 클라이언트를 식별하기 위해 사용된다.  
  (클라이언트에서 서버에 대해 요청을 보낼 때 출발지 포트로 랜덤으로 지정해서 보낸다.)
  
#### NAT와 NAPT
NAT와 NAPT는 기업이나 가정의 LAN에서 사용하는 프라이빗 IP주소를 인터넷에서 사용하는  
글로벌 IP주소로 변환하는 기술이다. 

- NAT(Network Address Translation)  
  NAT는 프라이빗 IP주소와 글로벌 IP 주소를 일대일로 연결하여 변환한다.  
  하나의 프라이빗 IP 주소와 하나의 글로벌 IP주소를 연결하는 것이다.  
  주로 서버를 인터넷에 공개할 때 사용한다.  
  LAN에서 인터넷으로 연결할 때는 출발지 IP주소를 변환한다.  
  반대로 인터넷에서 LAN으로 연결할 때는 목적직 IP주소를 변환한다.  
  
- NAPT(Network Address Port Translation)  
  NAPT는 프라이빗 IP주소와 글로벌 IP주소를 n대 1로 연결하여 반환한다.  
  NAPT는 LAN에서 인터넷에 액세스할 때 출발지 IP 주소 뿐만 아니라  
  출발지 포트 번호도 같이 반환함으로서 n 대 1 변환을 한다.  
  (하나의 IP에 포트가 여러개이기 때문에 N 대 1이 가능한 것이다.)
  














     
     






































