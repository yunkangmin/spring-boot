이번에는 인프라를 설계할 경우의 주의점에 대하여 설명한다.  
사용자로부터 요구사항을 잘 끌어내어 설계에 적용하는 것이 중요하다.  

### 인프라 설계의 어려움
인프라와 애플리케이션은 불가분의 관계이기 때문에 인프라만으로 서비스의 성능과 가용성을 높이는  
것은 무척 어렵다.  
구체적으로는 비용이 너무 높아지고, 기한도 길어진다.  
  
설계란 요구사항을 실제로 적용하는 과정으로, 인프라의 설계 시에는 다양한 물리적 제약과 요구를 조율하는 것이  
중요하다.  
즉, 비용과 납기 등 프로젝트에서 요구하는 제약, 설치 공간이나 이용 가능한 전력, 발생되는 열량 등의 물리적인  
제약, 이용 가능한 [CPU Clock](https://technote.kr/309), 메모리 용량, 디스크 용량, 데이터 전송량, 데이터 전송 속도 등의 사양적인 제약과  
같이 다양한 현실적 문제들을 얼마나 유효하게 활용할 수 있는가 하는 것이 중요하다.  
  
실제로는 인프라에 대한 사용자의 기능적 요건이 그렇게 많지는 않다.  
이것은 필자의 경험으로 보아 인프라의 요건을 구체화할 수 있는 사람이 많지 않기 때문인 것 같다.  
그 때문에 대체적으로 설계 단계 이전에 컨설팅을 하고 요건을 구체화할 필요가 있다.  
요건은 크게 기능적 요건과 비 기능적 요건의 두 종류로 나눌 수 있다.  
  
예를 들면 '1년간 10분이상 서비스를 정지시키지 않는다.'와 같은 것이 비 기능적 요건이며 엔지니어가 그 것을 구현하기 위한  
방법을 설계 및 구축하는데 , 이때 비 기능적 요건을 구현하기 위해 필요한 기능이 기능적 요건이 된다.  

### 인프라의 '기능적 요건'정의의 주의점
인프라의 기능적 요건은 초기단계에서는 구체화하지 않는 경우가 많다.  
대체적으로 비 기능적 요건을 구현하기 위한 수단이 먼저이며, 그 후에 비 기능적 요건을 구현하기 위해  
확정하는 경우가 대부분이다.  
실제로 조달 단계에 들어설 때는 비 기능적 요건도 기능적 요건이 되어야만 한다.  
그 시기에는 아래와 같은 기능적 요건이 확정되어 있을 것이다.  
- 네트워크는 이중화한다.  
- 2048bit 인증서로 동시에 4,000 접속이 가능한 SSL 오프로딩 기능이 있고, VRRP(Virtual Router Redundancy Protocol)에 따라  
  Active-Standby 구성이 가능한 로드밸런서
- 1 Gbps가 48포트이고 10Gbps가 2포트이며 스태킹 구성이 가능한 L2 스위치
- 동시 접속 수 80,000 세션에 대응하며 접속 소스당 사용량 제한이 가능한 방화벽
- 로드밸런서 하위에 웹 서버 4대를 배치한다. 
- 내부 네트워크는 외부 통신용과 서버 간의 통신용으로 분할한다.

여기에서는 복잡해서 이해가 되지 않더라도 괜찮으니 그대로 읽어나가기 바란다.  
이 요건으로 네트워크를 구성하면 다음과 같이 서버 4대를 위해 12대의 네트워크 기기가 필요하게 된다.  
비 기능적 요건을 얼마나 빠짐없이 구체화할 수 있는가, 예산과 기간 및 작업 과정의 제약 속에서 얼만큼 구현할 것인가  
하는 것이 인프라 엔지니어의 능력을 뽐낼수 잇는 부분이 된다.  
  
기능적 요건을 기본으로 한 구성([스택킹](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=franken82&logNo=130142596329), [VRRP](https://m.blog.naver.com/nackji80/220998936085))  
![image](https://user-images.githubusercontent.com/33191974/128601161-31645ad3-25f0-4544-82c7-1191bf5f92a3.png)  
  
### 인프라의 '비 기능적 요건' 정의의 주의점  
비 기능적 요건을 어떻게 정의할 것인가는 엔지니어 각자의 노하우에 따른 부분이기도 하여 쉽게 정리하기 어렵지만  
요건의 정의에 누락이 발생하게 되면 나중에 큰 어려움에 빠질 수 있기 때문에 최대한 빠짐없이 포함시키는 것이 중요하다.  
  
요건을 빠짐없이 정의하기 위해 일반적으로 공개되어 있는 정보를 사용해보자.  
일본의 독립 행정법인 정보처리 추진기구<sup>IPA</sup>에서는 비 기능적 요구 수준을 공개하고 있는데 기준으로서  
좋은 참고가 된다.  
따라서 이것을 기반으로 설명하고자 한다.  

#### IPA가 공개하고 있는 '비 기능적 요구 수준'
<http://www.ipa.go.jp/sec/softwareengineering/reports/20100416.html>
![image](https://user-images.githubusercontent.com/33191974/128601610-5426532b-353c-4a4e-a7c7-dbb8204d2d94.png)  
비 기능적 요건의 정의를 완벽하게 하고자 한다면 끝이 없다.  
실제로 현실 세계에서는 예산과 시간이 한정되어 있기 때문에 리스크와 현실 사이에서 적절히 타협하면서 진행하도록 하자.  
  
구현할 기능이 동일하다면 품질과 비용 그리고 납기는 삼각형의 세 변과 같이 균형을 맞추는 것이 프로젝트 관리의 기본이다.  
이 것을 머릿속에 기억해 두고 계속 읽어나가보자.  

### 인프라의 신뢰성 확보하기 
시스템의 신뢰성을 종합적으로 고려한 'RAS' 및 'RASIS'라는 지표가 있다.  
아래는 RAS의 의미이다.  
그리고 RASIS는 이것에 'Integrity : 무결성'과 'Security : 안정성'이 추가된다.  
- Reliability : 신뢰성
- Availability : 가용성
- Serviceability : 유지 보수성

또한 비슷한 개념으로, 정보 보안에서는 'CIA'라는 지표가 있다.  
이것은 위의 Availibility<sup>가용성</sup>, Integrity<sup>무결성</sup>에 Confidentiality<sup>기밀성</sup>를 추가한  
3요소를 유지하는 것이라고 ISO/IEC27002에 정의되어 있다.  
  
신뢰성과 기밀성의 지표를 바탕으로 균형을 고려하여 구현 방법을 검토하고 '비 기능적 요구 수준'을 사용해 확인하도록 하자.  

#### WARNING 성장 및 철수도 염두에 두자!
본문에 기재되어 있는 내용은 실제로는 어려울 수도 있다.  
요건이 과다하여 쓸데없는 투자가 되어버릴 수도 있고 반대로 부족하여 기회 손실이 되어버릴 수도 있다.  
우선은 가급적 일반적으로 공개되어 있는 기준이나 지표를 사용해보자. 




















  
